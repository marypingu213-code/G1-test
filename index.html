<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¤¾æœƒæŠ€å·§ï¼šæƒ…ç·’èˆ‡åŠ©äººå¯¦é©—å®¤</title>
    <style>
        :root { --primary: #3498db; --secondary: #9b59b6; --success: #2ecc71; --warning: #f1c40f; --danger: #e74c3c; }
        body { font-family: 'Microsoft JhengHei', sans-serif; background-color: #f0f7f9; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; padding: 20px; }
        
        /* çµ±ä¸€å¯¬ç‰ˆé¢ */
        .container { width: 100%; max-width: 900px; background: white; padding: 40px; border-radius: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; }
        
        /* ä¸»é¸å–®æŒ‰éˆ• */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px; }
        .menu-card { padding: 40px; border-radius: 20px; border: 4px solid var(--primary); cursor: pointer; transition: 0.3s; background: white; }
        .menu-card:hover { transform: translateY(-10px); background: #e1f5fe; }
        .menu-card i { font-size: 50px; display: block; margin-bottom: 15px; }
        .menu-card h2 { margin: 0; color: var(--primary); }

        /* éŠæˆ²å€åŸŸ */
        .game-screen { display: none; }
        .question-text { font-size: 28px; color: #d35400; font-weight: bold; margin-bottom: 20px; }
        .image-container { width: 350px; height: 350px; margin: 0 auto 30px; border: 6px solid var(--warning); border-radius: 20px; overflow: hidden; background: #fff; }
        .image-container img { width: 100%; height: 100%; object-fit: cover; }

        /* é¸é …æŒ‰éˆ• */
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 650px; margin: 0 auto; }
        button.btn { padding: 20px; font-size: 24px; cursor: pointer; border: 3px solid var(--primary); background: white; border-radius: 15px; font-weight: bold; transition: 0.2s; }
        button.btn:hover:not(:disabled) { background: #f0f8ff; }
        .correct { background: var(--success) !important; color: white; border-color: #27ae60; }
        .wrong { background: var(--danger) !important; color: white; border-color: #c0392b; }

        /* æç¤ºå€åŸŸ */
        .feedback-box { margin-top: 25px; padding: 25px; border-radius: 15px; display: none; background: #fff9db; border: 2px dashed var(--warning); }
        .feedback-text { font-size: 24px; color: #856404; font-weight: bold; }
        
        .nav-btns { margin-top: 30px; display: flex; justify-content: center; gap: 20px; }
        .next-btn { padding: 15px 50px; background: var(--secondary); color: white; border: none; border-radius: 50px; cursor: pointer; font-size: 22px; display: none; }
        .home-btn { padding: 10px 30px; background: #95a5a6; color: white; border: none; border-radius: 10px; cursor: pointer; }

        /* å·¦ä¸‹è§’æ™‚é˜ */
        #live-clock { position: fixed; bottom: 20px; left: 20px; background: #2c3e50; color: white; padding: 10px 20px; border-radius: 12px; font-size: 18px; font-family: monospace; z-index: 100; }
    </style>
</head>
<body>

    <div id="main-menu" class="container">
        <h1>ğŸ” ç¤¾æœƒæŠ€å·§å¯¦é©—å®¤</h1>
        <p style="font-size: 24px; color: #7f8c8d;">è€å¸«ï¼Œä»Šå¤©æƒ³è¦å¸¶å¤§å®¶ç·´ç¿’ä»€éº¼ï¼Ÿ</p>
        <div class="menu-grid">
            <div class="menu-card" onclick="startGame('emotion')">
                <span>ğŸ”</span>
                <h2>æƒ…ç·’å°åµæ¢</h2>
                <p>è¾¨è­˜é–‹å¿ƒã€ç”Ÿæ°£ã€é›£éç­‰å¿ƒæƒ…</p>
            </div>
            <div class="menu-card" onclick="startGame('helper')">
                <span>ğŸ¤</span>
                <h2>å°å°åŠ©äººé«˜æ‰‹</h2>
                <p>å­¸ç¿’ç•¶æœ‹å‹é›£éæ™‚è©²æ€éº¼åš</p>
            </div>
        </div>
    </div>

    <div id="game-container" class="container game-screen">
        <div id="q-text" class="question-text"></div>
        <div class="image-container">
            <img id="display-img" src="" alt="æ•™å­¸åœ–ç‰‡">
        </div>
        <div id="options-bin" class="options-grid"></div>
        
        <div id="feedback-area" class="feedback-box">
            <p class="feedback-text" id="feedback-msg"></p>
            <p style="color: #666; font-size: 18px;">(è«‹èˆ‰æ‰‹åˆ†äº«æƒ³æ³•å–”ï¼)</p>
        </div>

        <div class="nav-btns">
            <button class="home-btn" onclick="goHome()">å›ä¸»é¸å–®</button>
            <button id="next-btn" class="next-btn" onclick="nextStep()">ä¸‹ä¸€é¡Œ â”</button>
        </div>
    </div>

    <div id="live-clock">è¼‰å…¥æ™‚é–“...</div>

    <script>
        // è³‡æ–™è¨­å®š
        const emotionData = [
            { id: "happy", name: "é–‹å¿ƒ", img: "image/happy.png", options: ["é–‹å¿ƒ", "é›£é"], correct: 0, ref: "ä»€éº¼æ™‚å€™ä½ ä¹Ÿæœƒæ„Ÿè¦ºé–‹å¿ƒå‘¢ï¼Ÿ" },
            { id: "anger", name: "ç”Ÿæ°£", img: "image/anger.png", options: ["å®³æ€•", "ç”Ÿæ°£"], correct: 1, ref: "ç•¶ä½ ç”Ÿæ°£æ™‚ï¼Œä½ æœƒæ€éº¼è®“è‡ªå·±å†·éœï¼Ÿ" },
            { id: "sad", name: "é›£é", img: "image/sad.png", options: ["é›£é", "é«˜èˆˆ"], correct: 0, ref: "é€™æ™‚å€™ä½ æœ€å¸Œæœ›åˆ¥äººå°ä½ èªªä»€éº¼ï¼Ÿ" }
        ];

        const helperData = [
            { 
                scenario: "å°ç¾åœ¨è·‘æ­¥æ™‚è·Œå€’äº†ï¼Œçœ‹èµ·ä¾†å¾ˆç—›...",
                img: "image/sad.png", 
                options: ["æ‹¿è¡›ç”Ÿç´™çµ¦å¥¹", "ç¬‘å¥¹æ„›å“­é¬¼", "è«‹è€å¸«å¹«å¿™"],
                correct: [0, 2],
                feedback: "çµ¦äºˆé—œæ‡·æˆ–å°‹æ±‚è€å¸«å¹«åŠ©éƒ½æ˜¯å¾ˆæ£’çš„é¸æ“‡ï¼"
            },
            { 
                scenario: "å°ç¾æ‰¾ä¸åˆ°ç•«ç­†ï¼Œæ€¥å¾—å¿«å“­äº†...",
                img: "image/fear.png", 
                options: ["å•å¥¹ï¼šéœ€è¦å¹«å¿™å—ï¼Ÿ", "ä¸ç†å¥¹ç¹¼çºŒç•«", "é™ªå¥¹ä¸€èµ·æ‰¾"],
                correct: [0, 2],
                feedback: "ä¸»å‹•è©¢å•æˆ–é™ªä¼´å°æ–¹ï¼Œèƒ½è®“å¥¹ä¸é‚£éº¼å®³æ€•å–”ï¼"
            }
        ];

        let currentMode = '';
        let currentIdx = 0;

        // å•Ÿå‹•éŠæˆ²
        function startGame(mode) {
            currentMode = mode;
            currentIdx = 0;
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            loadContent();
        }

        // è¼‰å…¥å…§å®¹
        function loadContent() {
            const container = document.getElementById('game-container');
            const feedback = document.getElementById('feedback-area');
            const nextBtn = document.getElementById('next-btn');
            const bin = document.getElementById('options-bin');
            
            feedback.style.display = 'none';
            nextBtn.style.display = 'none';
            bin.style.display = 'grid';
            bin.innerHTML = '';

            if (currentMode === 'emotion') {
                const q = emotionData[currentIdx];
                document.getElementById('q-text').innerText = "é€™å¼µè‡‰æ˜¯ä»€éº¼æ„Ÿè¦ºå‘¢ï¼Ÿ";
                document.getElementById('display-img').src = q.img;
                q.options.forEach((opt, idx) => {
                    createButton(opt, idx === q.correct);
                });
            } else {
                const m = helperData[currentIdx];
                document.getElementById('q-text').innerText = m.scenario;
                document.getElementById('display-img').src = m.img;
                m.options.forEach((opt, idx) => {
                    const isCorrect = m.correct.includes(idx);
                    createButton(opt, isCorrect);
                });
            }
        }

        function createButton(text, isCorrect) {
            const btn = document.createElement('button');
            btn.className = 'btn';
            btn.innerText = text;
            btn.onclick = () => handleChoice(isCorrect, btn);
            document.getElementById('options-bin').appendChild(btn);
        }

        function handleChoice(isCorrect, btn) {
            if (isCorrect) {
                btn.classList.add('correct');
                const buttons = document.querySelectorAll('.btn');
                buttons.forEach(b => b.disabled = true);
                
                setTimeout(() => {
                    document.getElementById('options-bin').style.display = 'none';
                    document.getElementById('feedback-area').style.display = 'block';
                    
                    const msg = (currentMode === 'emotion') 
                        ? emotionData[currentIdx].ref 
                        : helperData[currentIdx].feedback;
                    
                    document.getElementById('feedback-msg').innerText = msg;
                    document.getElementById('next-btn').style.display = 'inline-block';
                }, 600);
            } else {
                btn.classList.add('wrong');
                setTimeout(() => btn.classList.remove('wrong'), 800);
            }
        }

        function nextStep() {
            currentIdx++;
            const max = (currentMode === 'emotion') ? emotionData.length : helperData.length;
            if (currentIdx < max) {
                loadContent();
            } else {
                alert("å¤ªæ£’äº†ï¼ä»»å‹™å…¨éƒ¨å®Œæˆï¼");
                goHome();
            }
        }

        function goHome() {
            document.getElementById('main-menu').style.display = 'block';
            document.getElementById('game-container').style.display = 'none';
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('live-clock').innerText = "ç¾åœ¨æ™‚é–“ï¼š" + now.toLocaleTimeString('zh-TW', { hour12: false });
        }
        setInterval(updateClock, 1000);
        updateClock();
    </script>
</body>
</html>
